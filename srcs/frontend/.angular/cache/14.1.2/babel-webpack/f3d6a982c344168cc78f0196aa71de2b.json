{"ast":null,"code":"import _asyncToGenerator from \"/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../techno-details/techno-details.component\";\n\nfunction TechnoListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-techno-details\", 1);\n    i0.ɵɵlistener(\"deleteTech\", function TechnoListComponent_div_2_Template_app_techno_details_deleteTech_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteTechno($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const techno_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"tech\", techno_r1);\n  }\n}\n\nexport class TechnoListComponent {\n  //allTechnos!: Observable<Technology[]>;\n  constructor(apiService) {\n    this.apiService = apiService;\n    this.dataSource = [];\n    this.techno = {\n      id: 0,\n      technoname: '',\n      category: '',\n      details: ''\n    };\n  }\n\n  ngOnInit() {\n    this.getTechnos();\n  }\n\n  getTechnos() {\n    this.apiService.getTechs().subscribe(result => {\n      console.log(result);\n      this.dataSource = result;\n    });\n  }\n\n  deleteTechno(techno) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log('deleteTechno', techno);\n\n      _this.apiService.removeTech(techno.id).subscribe(result => {\n        console.log(result);\n      });\n\n      yield new Promise(f => setTimeout(f, 50)); //peux mieux faire\n\n      _this.getTechnos();\n    })();\n  }\n\n}\n\nTechnoListComponent.ɵfac = function TechnoListComponent_Factory(t) {\n  return new (t || TechnoListComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n};\n\nTechnoListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TechnoListComponent,\n  selectors: [[\"app-techno-list\"]],\n  decls: 3,\n  vars: 1,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"tech\", \"deleteTech\"]],\n  template: function TechnoListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\");\n      i0.ɵɵtext(1, \"Toutes les technos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, TechnoListComponent_div_2_Template, 2, 1, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.dataSource);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.TechnoDetailsComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0ZWNobm8tbGlzdC5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAEAA,4BAAuC,CAAvC,EAAuC,oBAAvC,EAAuC,CAAvC;IACwCA;MAAAA;MAAA;MAAA,OAAcA,2CAAd;IAAkC,CAAlC;IAAoCA;;;;;IAApDA;IAAAA;;;;ACMxB,OAAM,MAAOC,mBAAP,CAA0B;EAQ9B;EACAC,YAAoBC,UAApB,EAA0C;IAAtB;IARpB,kBAA2B,EAA3B;IACA,cAAqB;MACnBC,EAAE,EAAE,CADe;MAEnBC,UAAU,EAAE,EAFO;MAGnBC,QAAQ,EAAE,EAHS;MAInBC,OAAO,EAAE;IAJU,CAArB;EAO+C;;EAE/CC,QAAQ;IACN,KAAKC,UAAL;EACD;;EAEDA,UAAU;IACR,KAAKN,UAAL,CAAgBO,QAAhB,GAA2BC,SAA3B,CAAsCC,MAAD,IAAU;MAC7CC,OAAO,CAACC,GAAR,CAAYF,MAAZ;MACA,KAAKG,UAAL,GAAkBH,MAAlB;IACD,CAHD;EAID;;EAEKI,YAAY,CAACC,MAAD,EAAmB;IAAA;;IAAA;MACnCJ,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BG,MAA5B;;MACA,KAAI,CAACd,UAAL,CAAgBe,UAAhB,CAA2BD,MAAM,CAACb,EAAlC,EAAsCO,SAAtC,CAAiDC,MAAD,IAAU;QACxDC,OAAO,CAACC,GAAR,CAAYF,MAAZ;MACD,CAFD;;MAGA,MAAM,IAAIO,OAAJ,CAAYC,CAAC,IAAIC,UAAU,CAACD,CAAD,EAAI,EAAJ,CAA3B,CAAN,CALmC,CAKO;;MAC1C,KAAI,CAACX,UAAL;IANmC;EAOpC;;AA7B6B;;;mBAAnBR,qBAAmBD;AAAA;;;QAAnBC;EAAmBqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDThC1B;MAAIA;MAAkBA;MAEtBA;;;;MAAwBA;MAAAA","names":["i0","TechnoListComponent","constructor","apiService","id","technoname","category","details","ngOnInit","getTechnos","getTechs","subscribe","result","console","log","dataSource","deleteTechno","techno","removeTech","Promise","f","setTimeout","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/frontend/src/app/techno-list/techno-list.component.html","/frontend/src/app/techno-list/techno-list.component.ts"],"sourcesContent":["<h3>Toutes les technos</h3>\n\n<div *ngFor=\"let techno of dataSource\">\n    <app-techno-details [tech]=\"techno\" (deleteTech)=\"deleteTechno($event)\"></app-techno-details>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Technology } from '../models/technology';\nimport { ApiService } from '../services/api.service';\n\n@Component({\n  selector: 'app-techno-list',\n  templateUrl: './techno-list.component.html',\n  styleUrls: ['./techno-list.component.css']\n})\nexport class TechnoListComponent implements OnInit {\n  dataSource: Technology[] = [];\n  techno: Technology = {\n    id: 0,\n    technoname: '',\n    category: '',\n    details: ''\n  };\n  //allTechnos!: Observable<Technology[]>;\n  constructor(private apiService: ApiService) { }\n\n  ngOnInit(): void {\n    this.getTechnos();\n  }\n\n  getTechnos() {\n    this.apiService.getTechs().subscribe((result)=>{\n      console.log(result);\n      this.dataSource = result;\n    });\n  }\n\n  async deleteTechno(techno: Technology) {\n    console.log('deleteTechno', techno);\n    this.apiService.removeTech(techno.id).subscribe((result)=>{\n      console.log(result);\n    });\n    await new Promise(f => setTimeout(f, 50));//peux mieux faire\n    this.getTechnos();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}